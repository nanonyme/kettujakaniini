<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kettu ja Kaniini</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Kettu ja Kaniini</h1>

  <!-- â”€â”€ Mode-select overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="modeOverlay" class="overlay">
    <div class="overlay-box">
      <h2>Valitse pelitapa</h2>
      <button class="big-btn" onclick="startLocal()">ğŸ–¥ï¸ Paikallinen peli</button>
      <button class="big-btn" onclick="showMultiplayerSetup()">ğŸŒ Moninpeli</button>
    </div>
  </div>

  <!-- â”€â”€ Multiplayer-setup overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="mpOverlay" class="overlay hidden">
    <div class="overlay-box">
      <h2>Moninpeli</h2>

      <!-- host / join choice -->
      <div id="mpChoice">
        <button class="big-btn" onclick="startHosting()">ğŸ¦Š Luo peli</button>
        <div class="or-sep">tai</div>
        <div class="join-row">
          <input id="tokenInput" type="text" placeholder="Liitymiskoodiâ€¦"
                 maxlength="36" autocomplete="off" spellcheck="false">
          <button class="big-btn" onclick="joinGame()">Liity â†’</button>
        </div>
        <button class="link-btn" onclick="showModeSelect()">â† Takaisin</button>
        <a class="link-btn" href="privacy.html">ğŸ”’ Miten yhteys toimii?</a>
      </div>

      <!-- host waiting panel -->
      <div id="hostPanel" class="hidden">
        <p class="mp-label">Odotetaan toista pelaajaaâ€¦</p>
        <div id="sessionTimer" class="timer">15:00</div>
        <div class="share-box">
          <input id="shareUrl" type="text" readonly>
          <div class="share-actions">
            <button class="big-btn" onclick="copyLink()">ğŸ“‹ Kopioi</button>
            <button class="big-btn" onclick="shareInvite()">ğŸ“¤ Jaa</button>
          </div>
        </div>
        <button class="link-btn" onclick="cancelSession()">âœ• Peruuta</button>
      </div>

      <!-- connecting spinner -->
      <div id="connectingPanel" class="hidden">
        <p class="mp-label">YhdistetÃ¤Ã¤nâ€¦</p>
        <div class="spinner"></div>
        <button class="link-btn" onclick="cancelSession()">âœ• Peruuta</button>
      </div>
    </div>
  </div>

  <!-- â”€â”€ Game area â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="gameArea" class="hidden">
    <div id="roleIndicator" class="role-badge hidden"></div>
    <div id="status"></div>
    <div id="boardWrap">
      <canvas id="canvas"></canvas>
      <div id="lockOverlay" class="lock-overlay hidden">
        <span>Odotetaan vastustajaaâ€¦</span>
      </div>
    </div>
    <button id="resetBtn" style="display:none" onclick="resetGame()">Uusi peli</button>
    <button id="menuBtn" class="link-btn" onclick="returnToMenu()">â† Menu</button>
    <div class="legend">
      <div class="legend-item">
        <canvas class="legend-canvas" id="legendFox" width="36" height="36"></canvas>
        <span>Kettu</span>
      </div>
      <div class="legend-item">
        <canvas class="legend-canvas" id="legendRabbit" width="36" height="36"></canvas>
        <span>Kaniini</span>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.5/dist/peerjs.min.js"></script>
  <script src="game.js"></script>
</body>
</html>
